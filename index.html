<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>EmpireBot Match Result</title>
  <style>
    body {
      font-family: 'Segoe UI', Arial, sans-serif;
      background: linear-gradient(135deg, #2c3e50 0%, #4ca1af 100%);
      margin: 0;
      padding: 0;
      min-height: 100vh;
    }
    .container {
      max-width: 820px;
      margin: 50px auto 0 auto;
      background: #fff;
      border-radius: 20px;
      box-shadow: 0 8px 32px rgba(44,62,80,0.16);
      padding: 40px 36px 36px 36px;
      min-height: 300px;
      position: relative;
      display: none; /* Hidden until initial loader finishes */
      animation: fadeIn 0.5s;
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    h1 {
      text-align: center;
      color: #263859;
      letter-spacing: 2px;
      font-weight: 700;
      font-size: 2.2em;
      margin-bottom: 40px;
      margin-top: 0;
    }
    .fixture-block {
      margin-bottom: 52px;
      border-bottom: 1px solid #e6ecf2;
      padding-bottom: 32px;
      background: #f6fafd;
      border-radius: 14px;
      box-shadow: 0 2px 10px #e9f2f5;
      transition: box-shadow 0.2s;
      position: relative;
    }
    .fixture-block:last-child {
      border-bottom: none;
      margin-bottom: 0;
    }
    .fixture-row {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 24px;
      margin-bottom: 13px;
      font-size: 1.18em;
      font-weight: 500;
      color: #1a3d5c;
      letter-spacing: 0.2px;
    }
    .team-block {
      display: flex;
      flex-direction: column;
      align-items: center;
      min-width: 160px;
    }
    .team-name {
      font-size: 1.13em;
      font-weight: 700;
      color: #12486b;
      margin-bottom: 2px;
      letter-spacing: 0.3px;
    }
    .odd-label {
      font-size: 0.98em;
      font-weight: 500;
      color: #fff;
      background: #5b3fd7;
      border-radius: 12px;
      padding: 2px 14px;
      margin-top: 3px;
      letter-spacing: 1px;
      box-shadow: 0 2px 6px #ece0fa;
      border: 2px solid #7a6cf5;
      transition: background 0.2s;
    }
    .vs-block {
      font-size: 1.05em;
      font-weight: 600;
      color: #aaa;
      margin: 0 10px;
      letter-spacing: 2px;
    }
    .score {
      font-size: 2.1em;
      margin-bottom: 20px;
      text-align: center;
      font-weight: bold;
      color: #1bd741;
      letter-spacing: 3px;
      font-family: 'Courier New', Courier, monospace;
      text-shadow: 0 1px 0 #e2f5e7;
    }
    .replay-zone {
      display: flex;
      justify-content: center;
      margin-top: 16px;
      gap: 20px;
    }
    .replay-btn {
      background: linear-gradient(90deg, #1bd741 0%, #3ad29f 100%);
      color: #fff;
      font-size: 1em;
      font-weight: 600;
      border: none;
      border-radius: 6px;
      padding: 9px 36px;
      cursor: pointer;
      transition: background 0.2s, box-shadow 0.2s;
      box-shadow: 0 2px 8px #d4f3e8;
      margin-bottom: 20px;
    }
    .replay-btn:hover {
      background: linear-gradient(90deg, #3ad29f 0%, #1bd741 100%);
      box-shadow: 0 4px 16px #b7e9d5;
    }
    .exit-btn {
      display: none;
      background: #f44336;
      color: #fff;
      font-size: 1em;
      font-weight: 600;
      border: none;
      border-radius: 6px;
      padding: 9px 34px;
      cursor: pointer;
      box-shadow: 0 2px 8px #f6d5d5;
      transition: background 0.2s, box-shadow 0.2s;
    }
    .exit-btn:hover {
      background: #e53935;
    }
    .replay {
      background: #222a36;
      color: #eaffed;
      padding: 18px 30px;
      border-radius: 8px;
      min-height: 120px;
      font-family: 'Fira Mono', 'Courier New', Courier, monospace;
      font-size: 1.04em;
      box-shadow: 0 2px 8px #c0d8f7;
      margin: 0 auto;
      width: 95%;
      margin-top: 8px;
      letter-spacing: 0.2px;
      display: none;
    }
    .event {
      margin: 9px 0;
      font-size: 1.07em;
      line-height: 1.8;
      color: #81f09c;
      text-shadow: 0 1px 0 #112;
    }
    .minute {
      color: #63d471;
      margin-right: 10px;
      font-weight: bold;
      font-size: 1.06em;
    }
    /* Initial page loader */
    .main-loader-bg {
      position: fixed;
      top:0; left:0; right:0; bottom:0;
      background: #222a36e6;
      z-index: 5000;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      min-height: 100vh;
      min-width: 100vw;
      transition: opacity 0.5s;
    }
    .main-loader-bg.hide {
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.5s;
    }
    .main-loader-circle {
      width: 75px;
      height: 75px;
      margin: 0 auto 24px auto;
      border: 8px solid #5b3fd7;
      border-top: 8px solid #1bd741;
      border-radius: 50%;
      animation: spinloader 1.1s linear infinite;
      box-shadow: 0 4px 18px #5b3fd780;
    }
    @keyframes spinloader {
      0% { transform: rotate(0deg);}
      100% { transform: rotate(360deg);}
    }
    .main-loader-text {
      color: #fff;
      font-size: 1.32em;
      font-family: 'Consolas', monospace;
      font-weight: 700;
      letter-spacing: 2px;
      min-height: 1.4em;
      text-shadow: 0 1px 0 #7a6cf5;
      text-align: center;
      margin-top: 8px;
      margin-bottom: 2px;
    }
    /* Loader inside replay */
    .loader-zone {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 160px;
      margin-bottom: 22px;
    }
    .lds-roller {
      display: inline-block;
      position: relative;
      width: 65px;
      height: 65px;
    }
    .lds-roller div {
      animation: lds-roller 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;
      transform-origin: 32px 32px;
    }
    .lds-roller div:after {
      content: " ";
      display: block;
      position: absolute;
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: #1bd741;
      margin: -4px 0 0 -4px;
      box-shadow: 0 0 8px #1bd74144;
    }
    .lds-roller div:nth-child(1) { animation-delay: -0.036s; }
    .lds-roller div:nth-child(2) { animation-delay: -0.072s; }
    .lds-roller div:nth-child(3) { animation-delay: -0.108s; }
    .lds-roller div:nth-child(4) { animation-delay: -0.144s; }
    .lds-roller div:nth-child(5) { animation-delay: -0.18s; }
    .lds-roller div:nth-child(6) { animation-delay: -0.216s; }
    .lds-roller div:nth-child(7) { animation-delay: -0.252s; }
    .lds-roller div:nth-child(8) { animation-delay: -0.288s; }
    @keyframes lds-roller {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    .loader-text {
      color: #1bd741;
      margin-top: 20px;
      font-size: 1.23em;
      font-family: 'Consolas', monospace;
      font-weight: 700;
      letter-spacing: 2px;
      min-height: 1.4em;
      text-shadow: 0 1px 0 #eaffed;
      text-align: center;
      animation: typing 1.5s steps(24, end) infinite;
    }
    @keyframes typing {
      from { opacity: 0.2; }
      to { opacity: 1; }
    }
    /* Responsive */
    @media (max-width: 900px) {
      .container { max-width: 99vw; padding: 18px 4vw 24px 4vw;}
      .replay { padding: 12px 4vw; }
      .fixture-row { flex-direction: column; gap: 6px; }
      .team-block { min-width: unset; }
    }
  </style>
</head>
<body>
  <!-- Initial page loader -->
  <div class="main-loader-bg" id="mainLoader">
    <div class="main-loader-circle"></div>
    <div class="main-loader-text" id="mainLoaderText"></div>
  </div>
  <div class="container" id="mainContent">
    <h1>EmpireBot Match Result</h1>
    <div id="matches"></div>
  </div>
  <!-- Loader image and text template -->
  <template id="loader-template">
    <div class="loader-zone">
      <div class="lds-roller">
        <div></div><div></div><div></div><div></div>
        <div></div><div></div><div></div><div></div>
      </div>
      <div class="loader-text" id="loader-text"></div>
    </div>
  </template>
  <script>
    // ===== EDIT THIS ARRAY TO ADD OR MODIFY FIXTURES =====
    // Format: { teamA, oddA, teamB, oddB, score }
    const matches = [
      {
        teamA: "EmpireBot>5320",
        oddA: "1.60",
        teamB: "EmpireBot>7123",
        oddB: "2.00",
        score: "2 - 1"
      },
      {
        teamA: "EmpireBot>8888",
        oddA: "2.20",
        teamB: "EmpireBot>4444",
        oddB: "1.90",
        score: "0 - 0"
      },
      {
        teamA: "EmpireBot>1234",
        oddA: "1.85",
        teamB: "EmpireBot>5678",
        oddB: "2.10",
        score: "1 - 3"
      }
      // Add more fixtures here
    ];

    // Generate a deterministic, event-based replay (no player names, just teams)
    function generateReplay(teamA, teamB, score) {
      const [goalsA, goalsB] = score.split("-").map(s => parseInt(s.trim()));
      // Example event timeline for up to 5 goals per team
      const timeline = [
        { minute: 4,  action: "attacks" },
        { minute: 11, action: "corner" },
        { minute: 22, action: "GOAL" },  // 1st goal spot
        { minute: 31, action: "defends" },
        { minute: 38, action: "GOAL" },  // 2nd goal spot
        { minute: 49, action: "attacks" },
        { minute: 61, action: "GOAL" },  // 3rd goal spot
        { minute: 76, action: "corner" },
        { minute: 82, action: "GOAL" },  // 4th goal spot
        { minute: 90, action: "Full Time" }
      ];
      // Distribute goals
      let goalEventsA = [], goalEventsB = [];
      for (let i = 0; i < Math.max(goalsA, goalsB); i++) {
        // alternate goals: A first, then B
        if (i < goalsA) goalEventsA.push(timeline[2 + i * 2]?.minute || (25 + i * 10));
        if (i < goalsB) goalEventsB.push(timeline[4 + i * 2]?.minute || (35 + i * 10));
      }
      // Build events: attacks/defends/corners alternate, goals in timeline
      let events = [];
      for (let i = 0; i < timeline.length; i++) {
        let t = timeline[i];
        // Insert A's goals
        if (goalEventsA.includes(t.minute)) {
          events.push({ minute: t.minute, team: teamA, action: 'GOAL' });
        }
        // Insert B's goals
        if (goalEventsB.includes(t.minute)) {
          events.push({ minute: t.minute, team: teamB, action: 'GOAL' });
        }
        // For other events, alternate teams except Full Time
        if (t.action !== 'GOAL' && t.action !== 'Full Time') {
          let team = (i % 2 === 0) ? teamA : teamB;
          events.push({ minute: t.minute, team: team, action: t.action });
        }
        // Full Time marker
        if (t.action === 'Full Time') {
          events.push({ minute: t.minute, team: '', action: 'Full Time' });
        }
      }
      // Remove duplicate Full Time or matches at same minute
      let seen = {};
      return events.filter(e => {
        let key = e.minute + e.team + e.action;
        if (seen[key]) return false;
        seen[key] = true;
        return true;
      });
    }

    // Render all matches
    function renderMatches() {
      const matchesDiv = document.getElementById('matches');
      matchesDiv.innerHTML = '';
      matches.forEach((m, idx) => {
        matchesDiv.innerHTML += `
          <div class="fixture-block" id="fixture-block-${idx}">
            <div class="fixture-row">
              <div class="team-block">
                <span class="team-name">${m.teamA}</span>
                <span class="odd-label">ODD ${m.oddA}</span>
              </div>
              <span class="vs-block">VS</span>
              <div class="team-block">
                <span class="team-name">${m.teamB}</span>
                <span class="odd-label">ODD ${m.oddB}</span>
              </div>
            </div>
            <div class="score">${m.score}</div>
            <div class="replay-zone">
              <button class="replay-btn" id="replay-btn-${idx}">Show Replay</button>
              <button class="exit-btn" id="exit-btn-${idx}">Exit</button>
            </div>
            <div class="replay" id="replay-${idx}"></div>
          </div>
        `;
      });
      // Attach event listeners
      matches.forEach((m, idx) => {
        const btn = document.getElementById(`replay-btn-${idx}`);
        const exitBtn = document.getElementById(`exit-btn-${idx}`);
        btn.addEventListener('click', () => startReplay(idx, m.teamA, m.teamB, m.score));
        exitBtn.addEventListener('click', () => exitReplay(idx));
      });
    }

    // Loader animation before showing replay
    function showLoader(parentDiv, idx, callback) {
      parentDiv.innerHTML = '';
      const loaderTpl = document.getElementById('loader-template');
      const loader = loaderTpl.content.cloneNode(true);
      parentDiv.appendChild(loader);
      let txt = parentDiv.querySelector('.loader-text');
      let count = 0;
      let max = 4;
      function typingLoader() {
        if (count < max) {
          txt.textContent = "Loading Results";
          setTimeout(() => {
            txt.textContent = "";
            setTimeout(() => {
              count++;
              typingLoader();
            }, 250);
          }, 700);
        } else {
          // Remove loader and run callback
          setTimeout(() => {
            parentDiv.innerHTML = '';
            callback();
          }, 400);
        }
      }
      typingLoader();
    }

    // Show replay for a fixture
    function startReplay(idx, teamA, teamB, score) {
      const replayDiv = document.getElementById(`replay-${idx}`);
      const btn = document.getElementById(`replay-btn-${idx}`);
      const exitBtn = document.getElementById(`exit-btn-${idx}`);
      btn.disabled = true;
      btn.textContent = "Loading...";
      replayDiv.style.display = 'block';
      exitBtn.style.display = 'inline-block';
      showLoader(replayDiv, idx, () => {
        // Generate replay events
        const events = generateReplay(teamA, teamB, score);
        replayDiv.innerHTML = '';
        let step = 0;
        function showNextEvent() {
          if (step < events.length) {
            const e = events[step];
            let content = '';
            if (e.action === "GOAL") {
              content = `<div class="event"><span class="minute">[${e.minute}']</span> <span style="color:#d7f441;font-weight:bold;">${e.team} GOAL!</span></div>`;
            } else if (e.action === "Full Time") {
              content = `<div class="event"><span class="minute">[${e.minute}']</span> <span style="color:#eaffed;font-weight:600;">Match ends</span></div>`;
            } else {
              content = `<div class="event"><span class="minute">[${e.minute}']</span> ${e.team} ${e.action}</div>`;
            }
            replayDiv.innerHTML += content;
            step++;
            setTimeout(showNextEvent, 1200);
          } else {
            btn.disabled = false;
            btn.textContent = "Show Replay";
          }
        }
        showNextEvent();
      });
    }

    function exitReplay(idx) {
      const replayDiv = document.getElementById(`replay-${idx}`);
      const btn = document.getElementById(`replay-btn-${idx}`);
      const exitBtn = document.getElementById(`exit-btn-${idx}`);
      replayDiv.style.display = 'none';
      replayDiv.innerHTML = '';
      btn.disabled = false;
      btn.textContent = "Show Replay";
      exitBtn.style.display = 'none';
    }

    // Initial page loader logic
    function runMainLoader(cb) {
      const loaderBg = document.getElementById('mainLoader');
      const loaderText = document.getElementById('mainLoaderText');
      let count = 0, max = 4;
      function loop() {
        if (count < max) {
          loaderText.textContent = "Loading Results";
          setTimeout(() => {
            loaderText.textContent = "";
            setTimeout(() => {
              count++;
              loop();
            }, 250);
          }, 700);
        } else {
          // Hide loader and show main content
          loaderBg.classList.add('hide');
          setTimeout(() => {
            loaderBg.style.display = "none";
            document.getElementById('mainContent').style.display = "block";
            cb();
          }, 400);
        }
      }
      loop();
    }

    // On page load
    window.onload = function() {
      runMainLoader(renderMatches);
    }
  </script>
</body>
</html>
